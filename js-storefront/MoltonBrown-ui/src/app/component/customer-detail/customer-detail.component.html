<div class="my-account" *ngIf="updateProfile; else editProfileBlock">
  <h2>My Profile</h2>
  <p *ngIf="updatePassword" class="password-cntnt">
    Your password has been changed
  </p>
  <p>
    Review your information. To make updates, click on Edit my Profile below.
  </p>
  <div class="rowComponents">
    <div class="col-sm-12 edit-profile" *ngIf="user">
      <h3>My Information</h3>
      <div>
        <div class="rowComponents">
          <div class="col-sm-6 update-profileBlock">
            <div class="form-inline">
              <p class="label">Title</p>
              <p>{{ user.title ? user.title : "Not yet Complete" }}</p>
            </div>
            <div class="form-inline">
              <p class="label">First Name</p>
              <p>{{ user.firstName ? user.firstName : "Not yet Complete" }}</p>
            </div>
            <div class="form-inline">
              <p class="label">Last Name</p>
              <p>{{ user.lastName ? user.lastName : "Not yet Complete" }}</p>
            </div>
            <div class="form-inline">
              <p class="label">Email Address</p>
              <p>{{ user.uid ? user.uid : "Not yet Complete" }}</p>
            </div>
            <div class="form-inline">
              <p class="label">Age Group</p>
              <p>{{ user.agegroup ? user.agegroup : "Not yet Complete" }}</p>
            </div>
            <div class="form-inline ">
              <p class="label">Gender</p>
              <p class="gender">
                {{ user.gender ? user .gender : "Not yet Complete" }}
              </p>
            </div>
          </div>
          <div class="col-sm-6 update-profileBlock" *ngIf="user.defaultAddress">
            <div class="form-inline">
              <p class="label">Address</p>
              <p>{{ user.defaultAddress.line1 }}</p>
            </div>
            <div class="form-inline">
              <p class="label">Town/City</p>
              <p>{{ user.defaultAddress.town }}</p>
            </div>
            <div class="form-inline">
              <p class="label">{{ "form.label.state" | translate }}</p>
              <p>
                {{
                  user.defaultAddress.district
                    ? user.defaultAddress.district
                    : "Not yet Complete"
                }}
              </p>
            </div>
            <div class="form-inline">
              <p class="label">Country</p>
              <p>
                {{
                  user.defaultAddress.country
                    ? user.defaultAddress.country.name
                    : "Not yet Complete"
                }}
              </p>
            </div>
            <div class="form-inline">
              <p class="label">Phone Number</p>
              <p>
                {{
                  user.defaultAddress.phone
                    ? user.defaultAddress.phone
                    : "Not yet Complete"
                }}
              </p>
            </div>
            <div class="form-inline">
              <p class="label">Postcode/Zipcode</p>
              <p>
                {{
                  user.defaultAddress.postalCode
                    ? user.defaultAddress.postalCode
                    : "Not yet Complete"
                }}
              </p>
            </div>
          </div>
        </div>
        <button class="pull-right buttonStyle" (click)="OnUpdateProfile(data)">
          Edit my Profile
        </button>
      </div>
    </div>

    <div class="col-sm-12 rowComponents no-padding accountPasswordChange">
      <div class="update-pwd  profile-block">
        <h3>Change my Password</h3>
       <p>Must be between 6 and 20 characters long</p>
        <form [formGroup]="updateForm" (ngSubmit)="onSubmitForm($event)" custom-focus>
          <p class="requiredFieldText label_text">
            <span class="redstar">*</span> Required Field
          </p>
          <p class="existing_update-pwd_label label_text">
            Current Password<span class="redstar">*</span>
          </p>
          <span class="login-fields-small">
            <input 
              autocomplete="off"
              formControlName="oldPassword"
              type="password"
              class="text mandatory form-control"
              (keyup)="onSubmitField($event)"  
              autocapitalize="on"
               [ngClass]="{
                'has-error not-valid':
                  !updateForm.get('oldPassword').valid && updateForm.get('oldPassword').touched,  
                  'valid':updateForm.get('oldPassword').valid,
                  'invalid':!updateForm.get('oldPassword').valid ,
                  'cred-error':showCrentialError
              }" />
              <p *ngIf="showCrentialError" class="credential-err-msg">Your  password may be incorrect. Please try again. </p>
            <div *ngIf="!updateForm.controls['oldPassword'].valid && updateForm.get('oldPassword').touched
              " class="not-valid-error-msg">
              <span [hidden]="!updateForm.controls['oldPassword'].errors.required">
                {{ "updatePassword.oldPassword" | translate }}</span>
            </div>
          </span>
          <p class="existing_update-pwd_label label_text">
            New Password<span class="redstar">*</span>
          </p>
          <span class="login-fields-small">
            <input
              autocomplete="off" 
              formControlName="password" 
              type="password"
              class="mandatory form-control reg_field" 
              [ngClass]="{
                'has-error  not-valid':
                  !updateForm.controls['password'].valid &&
                  updateForm.get('password').touched,
                   'valid':updateForm.get('password').valid,
                  'invalid':!updateForm.get('password').valid
              }" />
            <div
             *ngIf="
                !updateForm.controls['password'].valid &&
                updateForm.get('password').touched
              " class="not-valid-error-msg">
              <span
                [hidden]="!updateForm.controls['password'].errors.required">
                {{ "updatePassword.password" | translate }}
              </span>
              <span [hidden]="!updateForm.controls['password'].errors.patternInvalid">
                {{ "updatePassword.passwordInfo" | translate }}
              </span>
            </div>
          </span>
          <p class="existing_update-pwd_label label_text">
            Verify Password<span class="redstar">*</span>
          </p>
          <span class="login-fields-small">
            <input 
                type="password" 
                formControlName="confirmPassword" 
                class="mandatory form-control reg_field" 
                [ngClass]="{
                 'has-error  not-valid':!updateForm.controls['confirmPassword'].valid && updateForm.get('confirmPassword').touched, 
                  'valid':updateForm.get('confirmPassword').valid,
                  'invalid':!updateForm.get('confirmPassword').valid
              }" />
            <div *ngIf="
                !updateForm.controls['confirmPassword'].valid &&
                updateForm.get('confirmPassword').touched
              " class="not-valid-error-msg">
           
              <span
              [hidden]="
                !updateForm.controls['confirmPassword'].errors
                  .required
              "
              >{{ "register.confirmPassword" | translate }}</span
            >
            <span
              [hidden]="
                !updateForm.controls['confirmPassword'].errors
                  .appCustomValidator
              "
              >{{ "register.matchPassword" | translate }}</span>
            </div>
          </span>

          <div class="pull-right update-pwd-btn">
            <button type="submit" class="buttonStyle">Update Password</button>
          </div>
        </form>
      </div>
      <div class="edit-options profile-block">
        <h3>Express Checkout Options</h3>
        <p>
          This feature allows you to proceed to checkout in one click - saving
          you time. Simply setup your default options and then next time you
          shop with us login and when you are ready click on the Express
          Checkout Button in the basket page.
        </p>

        <div>
          <div class="col-sm-9 pull-left">
            <span> Default Shipping Method</span>
            <br />
            <b *ngIf="user"><span *ngIf="user.shippingMethod">{{
                user.shippingMethod.description
                  ? user.shippingMethod.description
                  : user.shippingMethod.serviceName
                  ? "From  " + user.shippingMethod.serviceName
                  : " "
              }}</span></b>
          </div>
          <div class="col-sm-3 pull-left">
            <button class="buttonStyle" (click)="OnUpdateProfile(data)">
              Edit
            </button>
          </div>
        </div>

        <div>
          <div class="col-sm-9 pull-left">
            <span> Default Card</span>
            <br />
            <b *ngIf="user"><span class="cc-accountnumber" *ngIf="user.creditCardInfo">{{
                
                replaceEncryptNumber(user.creditCardInfo.accountnumber)
              }}</span></b>
          </div>
          <div class="col-sm-3 pull-left">
            <button class="buttonStyle" (click)="OnUpdateCardDetails()">
              Edit
            </button>
          </div>
        </div>

        <div>
          <div class="col-sm-9 pull-left">
            <span>Default Shipping Address</span>
            <br />
            <b class="default-address" *ngIf="user">
              <div *ngIf="user.defaultAddress">
                <span *ngIf="user.defaultAddress.line1">{{
                  user.defaultAddress.line1
                }}</span>
                <!-- &nbsp;
                <span *ngIf="user.defaultAddress.line2">{{
                  user.defaultAddress.line2
                }}</span>&nbsp;
                <span *ngIf="user.defaultAddress.town">{{
                  user.defaultAddress.town
                }}</span>&nbsp;
                <span *ngIf="user.defaultAddress.country">{{
                  user.defaultAddress.country.name
                }}</span><br />
                <span>{{
                  user.defaultAddress.postalCode
                    ? user.defaultAddress.postalCode
                    : ""
                }}</span> -->
              </div>
            </b>
          </div>
          <div class="col-sm-3 pull-left">
            <button class="buttonStyle" (click)="OnUpdateAddress(data)">
              Edit
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #editProfileBlock>
  <div class="my-account">
    <h2 class="title profile">Edit my Profile</h2>
    <p>After you've made the desired changes, click Save.</p>
    <app-personal-form [profileData]="profileData" (cancelUpdate)="cancelUpdate($event)"></app-personal-form>
  </div>
</ng-template>