<div class="conatiner newsletter-body">
  <app-mb-bread-crumb
  *ngIf="breadcrumb"
  [breadcrumb]="breadcrumb"
></app-mb-bread-crumb>
  <div class="checkout-content">
    <div class="samples-container">
      <div
        class="innerSampleContainer"
        *ngIf="!confirmation; else newsLCnfrmblock"
      >
        <form
          class="newsletter-signup-form"
          [formGroup]="newsLetterForm"
          (ngSubmit)="onSubmitForm($event)"
          custom-focus
        >
          <fieldset>
            <h2>Join our guest list</h2>
            <h4 class="mobile-center" style="text-align: left">
              Be the first to hear about our latest product launches, limited
              edition collections, private sales and exclusive event invites.
              All straight to your inbox, door or phone.
            </h4>
            <div class="form-group login-fields">
              <input
                formControlName="emailAddress"
                autocorrect="off"
                autocomplete="off"
                placeholder="Email Address*"
                type="text"
                class="form-control  mandatory"
                [ngClass]="{
                  'has-error  not-valid':
                    !newsLetterForm.controls['emailAddress'].valid &&
                    newsLetterForm.get('emailAddress').touched
                }"
              />
              <div
                *ngIf="
                  !newsLetterForm.controls['emailAddress'].valid &&
                  newsLetterForm.get('emailAddress').touched
                "
                class="not-valid-error-msg"
              >
                <span
                  [hidden]="
                    !newsLetterForm.controls['emailAddress'].errors.required
                  "
                >
                  {{ "newsLetter.emailAddress" | translate }}</span
                >
                <span
                  [hidden]="
                    !newsLetterForm.controls['emailAddress'].errors
                      .patternInvalid
                  "
                  >{{ "register.invalidEmailAddress" | translate }}</span
                >
              </div>
            </div>

            <div class="form-group login-fields">
              <input
                formControlName="firstName"
                autocorrect="off"
                autocomplete="off"
                placeholder="First Name*"
                type="text"
                class="form-control  mandatory"
                [ngClass]="{
                  'has-error  not-valid':
                    !newsLetterForm.controls['firstName'].valid &&
                    newsLetterForm.get('firstName').touched
                }"
              />
              <div
                *ngIf="
                  !newsLetterForm.controls['firstName'].valid &&
                  newsLetterForm.get('firstName').touched
                "
                class="not-valid-error-msg"
              >
                <span
                  [hidden]="
                    !newsLetterForm.controls['firstName'].errors.required
                  "
                >
                  {{ "newsLetter.firstName" | translate }}</span
                >
              </div>
            </div>
            <div class="form-group login-fields">
              <input
                formControlName="lastName"
                autocorrect="off"
                autocomplete="off"
                placeholder="Last Name*"
                type="text"
                class="form-control  mandatory"
                [ngClass]="{
                  'has-error  not-valid':
                    !newsLetterForm.controls['lastName'].valid &&
                    newsLetterForm.get('lastName').touched
                }"
              />
              <div
                *ngIf="
                  !newsLetterForm.controls['lastName'].valid &&
                  newsLetterForm.get('lastName').touched
                "
                class="not-valid-error-msg"
              >
                <span
                  [hidden]="
                    !newsLetterForm.controls['lastName'].errors.required
                  "
                >
                  {{ "newsLetter.lastName" | translate }}</span
                >
              </div>
            </div>

            <h4 class="margin-space">
              Date of birth<span class="lighter"
                >(For an extra special treat on your birthday)</span
              >
            </h4>
            <div class="form-group displayFlex">
            <div class=" split-input">
              <select class="mandatory form-control selectDropdown" formControlName="day">
                <option >Day</option>
                <option *ngFor="let day of days">{{ day.day }}</option>
              </select>
            </div>
            <div class="split-input">
              <select class="mandatory form-control selectDropdown" formControlName="month">
                <option class="dropdown-months">Month</option>
                <option class="dropdown-months" *ngFor="let month of months">{{ month }}</option>
              </select>
            </div>
            <div class="split-input">
              <select class="mandatory form-control selectDropdown" formControlName="year">
                <option >Year</option>
                <option *ngFor="let year of years">{{ year.year }}</option>
              </select>
            </div>
          </div>
            <div class="form-group clearfix">
              <h4 class="margin-space">Gender</h4>
              <div class="radio gender-radio">
                <input
                  formControlName="gender"
                  name="gender"
                  type="radio"
                  value="F"
                />
                <label for="genderfemale">Female</label>
              </div>
              <div class="radio">
                <input
                  formControlName="gender"
                  name="gender"
                  type="radio"
                  value="M"
                />
                <label for="gendermale">Male</label>
              </div>
              <div class="radio">
                <input
                  formControlName="gender"
                  name="gender"
                  checked="checked"
                  type="radio"
                  value="NM"
                />
                <label for="genderneutral">Non-binary</label>
              </div>
            </div>
            <div class="form-group form-checkbox newsLetter">
              <div class="checkbox">
                <input
                  style="padding-top: 0px;"
                  type="checkbox"
                  class="checkbox"
                  formControlName="newsletterOptIn"
                  [ngClass]="{
                    'has-error  not-valid':
                      !newsLetterForm.controls['newsletterOptIn'].valid &&
                      newsLetterForm.get('newsletterOptIn').touched
                  }"
                />
                <label
                  class="terms-lbl"
                  [ngClass]="{
                    'has-error  not-valid terms-not-valid':
                      !newsLetterForm.controls['newsletterOptIn'].valid &&
                      newsLetterForm.get('newsletterOptIn').touched
                  }"
                  >I would like to receive communications from Molton
                  Brown.</label
                >
                <div
                  class="terms-error-msg-bottom error-block"
                  *ngIf="
                    getTypeOf(newsLetterForm.value['newsletterOptIn']) ||
                    (!newsLetterForm.controls['newsletterOptIn'].valid &&
                      newsLetterForm.get('newsletterOptIn').touched)
                  "
                >
                  <span
                    [hidden]="
                      !newsLetterForm.controls['newsletterOptIn'].errors
                        .required
                    "
                  >
                    {{ "newsLetter.communication" | translate }}
                  </span>
                </div>
              </div>
            </div>
            <div class="form-group form-checkbox newsLetter">
              <div class="checkbox">
                <input
                  style="padding-top: 0px;"
                  type="checkbox"
                  class="checkbox"
                  formControlName="newsletterOptInTerms"
                  [ngClass]="{
                    'has-error  not-valid':
                      !newsLetterForm.controls['newsletterOptInTerms'].valid &&
                      newsLetterForm.get('newsletterOptInTerms').touched
                  }"
                />
                <label
                  class="terms-lbl"
                  [ngClass]="{
                    'has-error  not-valid terms-not-valid':
                      !newsLetterForm.controls['newsletterOptInTerms'].valid &&
                      newsLetterForm.get('newsletterOptInTerms').touched
                  }"
                  >I accept the &nbsp;
                  <a
                    data-toggle="modal"
                    class="terms-lbl-content"
                    data-target="#modalCheckoutPopup"
                    (click)="onClickTerms()"
                  >
                    Terms & Conditions
                  </a>
                  &nbsp;and&nbsp;
                  <a
                    data-toggle="modal"
                    data-target="#modalCheckoutPopup"
                    (click)="onClickPrivacy()"
                  >
                    Privacy & Cookie Policy
                  </a>
                </label>
                <div
                  class="terms-error-msg-bottom error-block"
                  *ngIf="
                    getTypeOf(newsLetterForm.value['newsletterOptInTerms']) ||
                    (!newsLetterForm.controls['newsletterOptInTerms'].valid &&
                      newsLetterForm.get('newsletterOptInTerms').touched)
                  "
                >
                  <span
                    [hidden]="
                      !newsLetterForm.controls['newsletterOptInTerms'].errors
                        .required
                    "
                  >
                    {{ "newsLetter.terms" | translate }}
                  </span>
                </div>
              </div>
            </div>
            <div class="form-group flexCenter">
              <input type="submit" value="submit" class="btn btn-default" />
            </div>
          </fieldset>
        </form>
        <p class="lighter">*Required field</p>
        <p class="flexCenter">
          We always treat your personal details with the utmost care and never
          sell them to other companies. You can unsubscribe at any time.
        </p>
      </div>
      <ng-template #newsLCnfrmblock>
        <div class="confirmation-content thankyou" *ngIf="newsLetterForm">
          <h1>Thank you</h1>
          <h4>
            Thank you <span *ngIf="recipientName">{{ recipientName }}</span> for
            subscribing to our newsletter.
          </h4>
          <a routerLink="/store" class="cta" title="">Continue Shopping</a>
        </div>
      </ng-template>
      <div
        class=""
        [ngClass]="{
          'inner-container-RightBlock': !confirmation,
          'inner-container-ResultBlock': confirmation
        }"
      >
        <img
          src="//images.moltonbrown.co.uk/MBPromoImages/email-signup_desktop.jpg"
          class="desk-block"
        />
      </div>
    </div>
  </div>
</div>

<div
  class="modal"
  id="modalCheckoutPopup"
  tabindex="-1"
  role="dialog"
  aria-hidden="true"
>
  <div
    class="chck-modal-dialog modal-dialog modal-full container modal-dialog-scrollable"
    role="document"
  >
    <div class="modal-content">
      <div class="chck-modal-header modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <h4 class="modal-title text-center">{{ modalTitle }}</h4>
      </div>
      <div class="modal-body chck-modal-body" #newsLetterEl></div>
    </div>
  </div>
</div>
